"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.STOP_PROCESSING = "STOP_PROCESSING";
var PayloadIO = (function () {
    function PayloadIO() {
        var self = this;
        self._endpoints = [];
    }
    PayloadIO.prototype.add = function (endpoint) {
        var self = this;
        self._endpoints.add(endpoint);
    };
    PayloadIO.prototype.remove = function (endpoint) {
        var self = this;
        self._endpoints.remove(endpoint);
    };
    PayloadIO.prototype.process = function (payload) {
        var self = this;
        // Make a copy of the endpoints array, it may change endpoints
        // can remove them selves during iteration.
        var endpoints = self._endpoints.slice(0);
        for (var i = 0; i < endpoints.length; ++i) {
            if (endpoints[i].process(payload) === exports.STOP_PROCESSING)
                break;
        }
    };
    return PayloadIO;
}());
exports.PayloadIO = PayloadIO;
exports.payloadIO = new PayloadIO();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGF5bG9hZElPLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiUGF5bG9hZElPLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBRVcsUUFBQSxlQUFlLEdBQUcsaUJBQWlCLENBQUM7QUFFL0M7SUFHSTtRQUNJLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQixJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQztJQUN6QixDQUFDO0lBRUQsdUJBQUcsR0FBSCxVQUFJLFFBQVE7UUFDUixJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFDaEIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDbEMsQ0FBQztJQUVELDBCQUFNLEdBQU4sVUFBTyxRQUFRO1FBQ1gsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFHRCwyQkFBTyxHQUFQLFVBQVEsT0FBTztRQUNYLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQztRQUNoQiw4REFBOEQ7UUFDOUQsMkNBQTJDO1FBQzNDLElBQUksU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3pDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDO1lBQ3hDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssdUJBQWUsQ0FBQztnQkFDbEQsS0FBSyxDQUFDO1FBQ2QsQ0FBQztJQUNMLENBQUM7SUFFTCxnQkFBQztBQUFELENBQUMsQUE5QkQsSUE4QkM7QUE5QlksOEJBQVM7QUFnQ1gsUUFBQSxTQUFTLEdBQUcsSUFBSSxTQUFTLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7UGF5bG9hZEVuZHBvaW50fSBmcm9tIFwiLi9QYXlsb2FkRW5kcG9pbnRcIjtcblxuZXhwb3J0IGxldCBTVE9QX1BST0NFU1NJTkcgPSBcIlNUT1BfUFJPQ0VTU0lOR1wiO1xuXG5leHBvcnQgY2xhc3MgUGF5bG9hZElPIHtcbiAgICBwcml2YXRlIF9lbmRwb2ludHM6IFBheWxvYWRFbmRwb2ludFtdO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5fZW5kcG9pbnRzID0gW107XG4gICAgfVxuXG4gICAgYWRkKGVuZHBvaW50KSB7XG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5fZW5kcG9pbnRzLmFkZChlbmRwb2ludCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlKGVuZHBvaW50KSB7XG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcbiAgICAgICAgc2VsZi5fZW5kcG9pbnRzLnJlbW92ZShlbmRwb2ludCk7XG4gICAgfVxuXG5cbiAgICBwcm9jZXNzKHBheWxvYWQpIHtcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgICAgICAvLyBNYWtlIGEgY29weSBvZiB0aGUgZW5kcG9pbnRzIGFycmF5LCBpdCBtYXkgY2hhbmdlIGVuZHBvaW50c1xuICAgICAgICAvLyBjYW4gcmVtb3ZlIHRoZW0gc2VsdmVzIGR1cmluZyBpdGVyYXRpb24uXG4gICAgICAgIGxldCBlbmRwb2ludHMgPSBzZWxmLl9lbmRwb2ludHMuc2xpY2UoMCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZW5kcG9pbnRzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBpZiAoZW5kcG9pbnRzW2ldLnByb2Nlc3MocGF5bG9hZCkgPT09IFNUT1BfUFJPQ0VTU0lORylcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxufVxuXG5leHBvcnQgbGV0IHBheWxvYWRJTyA9IG5ldyBQYXlsb2FkSU8oKTsiXX0=